# Настройка стиля кода для TypeScript/TSX

Этот проект настроен с полным набором инструментов для обеспечения единообразного стиля кода.

## Установленные инструменты

### 1. Prettier

Автоматическое форматирование кода для обеспечения единообразного стиля.

**Конфигурация:** `.prettierrc`

- Одинарные кавычки
- Точки с запятой
- Отступы: 2 пробела
- Максимальная длина строки: 80 символов
- Unix окончания строк (LF)

### 2. ESLint

Статический анализ кода с правилами для TypeScript и React.

**Конфигурация:** `eslint.config.mjs`

- Next.js правила
- TypeScript правила
- React правила
- Предупреждения о console.log
- Запрет на использование `any`

### 3. EditorConfig

Единообразные настройки для разных редакторов кода.

**Конфигурация:** `.editorconfig`

- Отступы: 2 пробела
- Unix окончания строк
- Автоматическое удаление пробелов в конце строк

### 4. Husky + lint-staged

Автоматическая проверка кода перед коммитом.

**Конфигурация:** `.husky/pre-commit`

- Автоматическое исправление ESLint ошибок
- Автоматическое форматирование с Prettier

## Доступные команды

```bash
# Проверка стиля кода
npm run lint              # Проверка ESLint
npm run lint:fix          # Автоматическое исправление ESLint ошибок

# Форматирование кода
npm run format            # Форматирование всех файлов с Prettier
npm run format:check      # Проверка форматирования без изменений

# Проверка типов TypeScript
npm run type-check        # Проверка типов без компиляции

# Комплексная проверка
npm run check-all         # Проверка типов + ESLint + форматирование
```

## Настройка VS Code

Для автоматического форматирования и исправления ошибок установите расширения:

1. **Prettier - Code formatter** (`esbenp.prettier-vscode`)
2. **ESLint** (`dbaeumer.vscode-eslint`)

Настройки уже включены в `.vscode/settings.json`:

- Автоматическое форматирование при сохранении
- Автоматическое исправление ESLint ошибок
- Использование Prettier как форматтера по умолчанию

## Workflow разработки

### Автоматический режим

1. Husky автоматически проверяет код перед каждым коммитом
2. ESLint исправляет ошибки автоматически
3. Prettier форматирует код автоматически

### Ручной режим

```bash
# Перед коммитом выполните:
npm run check-all

# Если есть ошибки форматирования:
npm run format

# Если есть ESLint ошибки:
npm run lint:fix
```

## Правила стиля

### TypeScript

- Используйте `const` вместо `let` когда возможно
- Избегайте `any`, используйте конкретные типы
- Предупреждения о неиспользуемых переменных (кроме тех, что начинаются с `_`)

### React

- Не используйте `prop-types` (отключено для TypeScript проектов)
- Проверяйте зависимости в `useEffect` и других хуках
- Предупреждения о `console.log` в продакшене

### Общие правила

- Запрет на `var`, используйте `const`/`let`
- Предупреждения о `console.log`
- Ошибки при использовании `debugger`

## Исключения

Некоторые файлы игнорируются автоматически:

- `node_modules/`
- `.next/`
- Сгенерированные файлы
- Лок-файлы пакетов

Полный список в `.prettierignore`.

## Устранение проблем

### ESLint не работает

```bash
# Переустановите зависимости
npm install

# Проверьте конфигурацию
npx eslint --print-config app/page.tsx
```

### Prettier конфликтует с ESLint

Конфигурация уже настроена для совместной работы. Если возникают конфликты:

```bash
# Проверьте конфигурацию ESLint
npm run lint

# Проверьте форматирование
npm run format:check
```

### Husky не срабатывает

```bash
# Переустановите Husky
npx husky install
npx husky add .husky/pre-commit "npx lint-staged"
```
